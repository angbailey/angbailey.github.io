<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Angelica Bailey" />

<meta name="date" content="2025-10-23" />

<title>plotly</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.11.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.2.2/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="plotly.html">Plotly</a>
</li>
<li>
  <a href="mailto:&lt;angelica.p.bailey@gmail.com&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://github.com/angbailey/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">plotly</h1>
<h4 class="author">Angelica Bailey</h4>
<h4 class="date">2025-10-23</h4>

</div>


<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching core tidyverse packages ──── tidyverse 2.0.0 ──
## ✔ dplyr     1.1.4     ✔ readr     2.1.5
## ✔ forcats   1.0.0     ✔ stringr   1.5.1
## ✔ ggplot2   3.5.2     ✔ tibble    3.3.0
## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1
## ✔ purrr     1.1.0     
## ── Conflicts ────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
## ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
<pre class="r"><code>library(p8105.datasets)
library(plotly)</code></pre>
<pre><code>## 
## Attaching package: &#39;plotly&#39;
## 
## The following object is masked from &#39;package:ggplot2&#39;:
## 
##     last_plot
## 
## The following object is masked from &#39;package:stats&#39;:
## 
##     filter
## 
## The following object is masked from &#39;package:graphics&#39;:
## 
##     layout</code></pre>
<pre class="r"><code>data(&quot;instacart&quot;)

instacart = instacart |&gt; 
  sample_n(10000)</code></pre>
<p>#Plot ideas</p>
<ul>
<li>Most popular aisles or departments: Bar plot showing total orders
per aisle or department</li>
<li>Distribution of products added to cart position: Histogram of
add_to_cart_order(do users tend to add certain prodcuts earlier in their
cart)</li>
<li>Reorder rate by department or aisle: bar plot showing proportion of
reordered items in each department</li>
<li>Reorder probability by time of day: Line plot of average reordered
rate vs. order_hour_of_day</li>
<li>Orders by hour of day: bar plot or histogram of order_hour_of_day
(when do people shop the most?)</li>
<li>Orders by day of the week: Bar plot of order_dow</li>
</ul>
<p>Bar plot showing total orders per aisle or department</p>
<pre class="r"><code>#total number of orders per aisle
dept_summary = instacart |&gt; 
  group_by(department) |&gt; 
  summarise(total_orders = n()) |&gt; 
  arrange(desc(total_orders))

plot_ly(
  data = dept_summary,
  x = ~reorder(department, total_orders),
  y = ~total_orders,
  type = &#39;bar&#39;,
  color = ~department,
  colors = &quot;Set1&quot;,
  text = ~paste(&quot;Orders:&quot;, total_orders),
  hoverinfo = &quot;text&quot;,
  textposition = &quot;none&quot;  # hides text inside bars
) |&gt; 
  layout(
    title = &quot;Total Orders by Department&quot;,
    xaxis = list(title = &quot;Department&quot;, tickangle = -45),
    yaxis = list(title = &quot;Number of Orders&quot;),
    showlegend = FALSE
  )</code></pre>
<pre><code>## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors
## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9
## Returning the palette you asked for with that many colors</code></pre>
<div class="plotly html-widget html-fill-item" id="htmlwidget-2007410904caf83a5820" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-2007410904caf83a5820">{"x":{"visdat":{"c85c13155608":["function () ","plotlyVisDat"]},"cur_data":"c85c13155608","attrs":{"c85c13155608":{"x":{},"y":{},"text":{},"hoverinfo":"text","textposition":"none","color":{},"colors":"Set1","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Total Orders by Department","xaxis":{"domain":[0,1],"automargin":true,"title":"Department","tickangle":-45,"type":"category","categoryorder":"array","categoryarray":["other","bulk","pets","alcohol","missing","international","babies","personal care","meat seafood","breakfast","dry goods pasta","household","canned goods","deli","bakery","pantry","frozen","beverages","snacks","dairy eggs","produce"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Number of Orders"},"showlegend":false,"hovermode":"closest"},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["alcohol"],"y":[40],"text":"Orders: 40","hoverinfo":"text","textposition":"none","type":"bar","name":"alcohol","marker":{"color":"rgba(228,26,28,1)","line":{"color":"rgba(228,26,28,1)"}},"textfont":{"color":"rgba(228,26,28,1)"},"error_y":{"color":"rgba(228,26,28,1)"},"error_x":{"color":"rgba(228,26,28,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["babies"],"y":[104],"text":"Orders: 104","hoverinfo":"text","textposition":"none","type":"bar","name":"babies","marker":{"color":"rgba(188,86,91,1)","line":{"color":"rgba(188,86,91,1)"}},"textfont":{"color":"rgba(188,86,91,1)"},"error_y":{"color":"rgba(188,86,91,1)"},"error_x":{"color":"rgba(188,86,91,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["bakery"],"y":[346],"text":"Orders: 346","hoverinfo":"text","textposition":"none","type":"bar","name":"bakery","marker":{"color":"rgba(125,115,152,1)","line":{"color":"rgba(125,115,152,1)"}},"textfont":{"color":"rgba(125,115,152,1)"},"error_y":{"color":"rgba(125,115,152,1)"},"error_x":{"color":"rgba(125,115,152,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["beverages"],"y":[769],"text":"Orders: 769","hoverinfo":"text","textposition":"none","type":"bar","name":"beverages","marker":{"color":"rgba(72,136,164,1)","line":{"color":"rgba(72,136,164,1)"}},"textfont":{"color":"rgba(72,136,164,1)"},"error_y":{"color":"rgba(72,136,164,1)"},"error_x":{"color":"rgba(72,136,164,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["breakfast"],"y":[219],"text":"Orders: 219","hoverinfo":"text","textposition":"none","type":"bar","name":"breakfast","marker":{"color":"rgba(84,155,121,1)","line":{"color":"rgba(84,155,121,1)"}},"textfont":{"color":"rgba(84,155,121,1)"},"error_y":{"color":"rgba(84,155,121,1)"},"error_x":{"color":"rgba(84,155,121,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["bulk"],"y":[8],"text":"Orders: 8","hoverinfo":"text","textposition":"none","type":"bar","name":"bulk","marker":{"color":"rgba(77,175,74,1)","line":{"color":"rgba(77,175,74,1)"}},"textfont":{"color":"rgba(77,175,74,1)"},"error_y":{"color":"rgba(77,175,74,1)"},"error_x":{"color":"rgba(77,175,74,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["canned goods"],"y":[334],"text":"Orders: 334","hoverinfo":"text","textposition":"none","type":"bar","name":"canned goods","marker":{"color":"rgba(123,141,114,1)","line":{"color":"rgba(123,141,114,1)"}},"textfont":{"color":"rgba(123,141,114,1)"},"error_y":{"color":"rgba(123,141,114,1)"},"error_x":{"color":"rgba(123,141,114,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["dairy eggs"],"y":[1577],"text":"Orders: 1577","hoverinfo":"text","textposition":"none","type":"bar","name":"dairy eggs","marker":{"color":"rgba(145,102,147,1)","line":{"color":"rgba(145,102,147,1)"}},"textfont":{"color":"rgba(145,102,147,1)"},"error_y":{"color":"rgba(145,102,147,1)"},"error_x":{"color":"rgba(145,102,147,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["deli"],"y":[342],"text":"Orders: 342","hoverinfo":"text","textposition":"none","type":"bar","name":"deli","marker":{"color":"rgba(179,86,139,1)","line":{"color":"rgba(179,86,139,1)"}},"textfont":{"color":"rgba(179,86,139,1)"},"error_y":{"color":"rgba(179,86,139,1)"},"error_x":{"color":"rgba(179,86,139,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["dry goods pasta"],"y":[270],"text":"Orders: 270","hoverinfo":"text","textposition":"none","type":"bar","name":"dry goods pasta","marker":{"color":"rgba(221,105,88,1)","line":{"color":"rgba(221,105,88,1)"}},"textfont":{"color":"rgba(221,105,88,1)"},"error_y":{"color":"rgba(221,105,88,1)"},"error_x":{"color":"rgba(221,105,88,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["frozen"],"y":[736],"text":"Orders: 736","hoverinfo":"text","textposition":"none","type":"bar","name":"frozen","marker":{"color":"rgba(255,127,0,1)","line":{"color":"rgba(255,127,0,1)"}},"textfont":{"color":"rgba(255,127,0,1)"},"error_y":{"color":"rgba(255,127,0,1)"},"error_x":{"color":"rgba(255,127,0,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["household"],"y":[275],"text":"Orders: 275","hoverinfo":"text","textposition":"none","type":"bar","name":"household","marker":{"color":"rgba(255,181,21,1)","line":{"color":"rgba(255,181,21,1)"}},"textfont":{"color":"rgba(255,181,21,1)"},"error_y":{"color":"rgba(255,181,21,1)"},"error_x":{"color":"rgba(255,181,21,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["international"],"y":[91],"text":"Orders: 91","hoverinfo":"text","textposition":"none","type":"bar","name":"international","marker":{"color":"rgba(255,231,41,1)","line":{"color":"rgba(255,231,41,1)"}},"textfont":{"color":"rgba(255,231,41,1)"},"error_y":{"color":"rgba(255,231,41,1)"},"error_x":{"color":"rgba(255,231,41,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["meat seafood"],"y":[215],"text":"Orders: 215","hoverinfo":"text","textposition":"none","type":"bar","name":"meat seafood","marker":{"color":"rgba(238,220,51,1)","line":{"color":"rgba(238,220,51,1)"}},"textfont":{"color":"rgba(238,220,51,1)"},"error_y":{"color":"rgba(238,220,51,1)"},"error_x":{"color":"rgba(238,220,51,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["missing"],"y":[61],"text":"Orders: 61","hoverinfo":"text","textposition":"none","type":"bar","name":"missing","marker":{"color":"rgba(203,153,47,1)","line":{"color":"rgba(203,153,47,1)"}},"textfont":{"color":"rgba(203,153,47,1)"},"error_y":{"color":"rgba(203,153,47,1)"},"error_x":{"color":"rgba(203,153,47,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["other"],"y":[4],"text":"Orders: 4","hoverinfo":"text","textposition":"none","type":"bar","name":"other","marker":{"color":"rgba(166,86,40,1)","line":{"color":"rgba(166,86,40,1)"}},"textfont":{"color":"rgba(166,86,40,1)"},"error_y":{"color":"rgba(166,86,40,1)"},"error_x":{"color":"rgba(166,86,40,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["pantry"],"y":[566],"text":"Orders: 566","hoverinfo":"text","textposition":"none","type":"bar","name":"pantry","marker":{"color":"rgba(200,102,100,1)","line":{"color":"rgba(200,102,100,1)"}},"textfont":{"color":"rgba(200,102,100,1)"},"error_y":{"color":"rgba(200,102,100,1)"},"error_x":{"color":"rgba(200,102,100,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["personal care"],"y":[142],"text":"Orders: 142","hoverinfo":"text","textposition":"none","type":"bar","name":"personal care","marker":{"color":"rgba(232,120,160,1)","line":{"color":"rgba(232,120,160,1)"}},"textfont":{"color":"rgba(232,120,160,1)"},"error_y":{"color":"rgba(232,120,160,1)"},"error_x":{"color":"rgba(232,120,160,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["pets"],"y":[29],"text":"Orders: 29","hoverinfo":"text","textposition":"none","type":"bar","name":"pets","marker":{"color":"rgba(229,136,183,1)","line":{"color":"rgba(229,136,183,1)"}},"textfont":{"color":"rgba(229,136,183,1)"},"error_y":{"color":"rgba(229,136,183,1)"},"error_x":{"color":"rgba(229,136,183,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["produce"],"y":[2950],"text":"Orders: 2950","hoverinfo":"text","textposition":"none","type":"bar","name":"produce","marker":{"color":"rgba(192,146,168,1)","line":{"color":"rgba(192,146,168,1)"}},"textfont":{"color":"rgba(192,146,168,1)"},"error_y":{"color":"rgba(192,146,168,1)"},"error_x":{"color":"rgba(192,146,168,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["snacks"],"y":[922],"text":"Orders: 922","hoverinfo":"text","textposition":"none","type":"bar","name":"snacks","marker":{"color":"rgba(153,153,153,1)","line":{"color":"rgba(153,153,153,1)"}},"textfont":{"color":"rgba(153,153,153,1)"},"error_y":{"color":"rgba(153,153,153,1)"},"error_x":{"color":"rgba(153,153,153,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>What are the most popular items? (Horizontal bar chart) top 20 most
frequently purchased products</p>
<pre class="r"><code>orders_by_hour = instacart |&gt; 
  group_by(order_id) |&gt; 
  summarise(
    #get the hour for this order (it&#39;s the same for all rows in the group)
    order_hour = first(order_hour_of_day) 
  ) |&gt; 
  ungroup()

#count total number of orders for each hour
plot_data = orders_by_hour |&gt; 
  count(order_hour, name = &quot;total_orders&quot;)

#plot
plot_ly(
  data = plot_data,
  x = ~order_hour,
  y = ~total_orders,
  type = &#39;bar&#39;,
  color = ~order_hour,
  colors = &quot;Set3&quot;,
  hoverinfo = &#39;text&#39;,
  textposition = &quot;none&quot;,
  text = ~paste(
    &quot;Hour:&quot;, order_hour,
    &quot;Total Orders:&quot;, format(total_orders, big.mark = &quot;,&quot;)
  )) |&gt; 
  layout(
    title = &quot;Peak Shopping Hours&quot;,
    xaxis = list(
      title = &quot;Hour of Day (0-23)&quot;,
      type = &#39;category&#39;,  
      tickmode = &#39;linear&#39;
    ),
    yaxis = list(
      title = &quot;Total Number of Orders&quot;
    )
  )</code></pre>
<pre><code>## Warning: textfont.color doesn&#39;t (yet) support data arrays
## Warning: textfont.color doesn&#39;t (yet) support data arrays</code></pre>
<div class="plotly html-widget html-fill-item" id="htmlwidget-1c0cd9153889cfc23ab4" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-1c0cd9153889cfc23ab4">{"x":{"visdat":{"c85c1106af94":["function () ","plotlyVisDat"]},"cur_data":"c85c1106af94","attrs":{"c85c1106af94":{"x":{},"y":{},"hoverinfo":"text","textposition":"none","text":{},"color":{},"colors":"Set3","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Peak Shopping Hours","xaxis":{"domain":[0,1],"automargin":true,"title":"Hour of Day (0-23)","type":"category","tickmode":"linear"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Total Number of Orders"},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],"y":[62,36,22,13,16,30,95,268,467,588,764,718,725,807,851,783,732,703,521,399,287,249,182,109],"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"textposition":["none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none"],"text":["Hour: 0 Total Orders:  62","Hour: 1 Total Orders:  36","Hour: 2 Total Orders:  22","Hour: 3 Total Orders:  13","Hour: 4 Total Orders:  16","Hour: 5 Total Orders:  30","Hour: 6 Total Orders:  95","Hour: 7 Total Orders: 268","Hour: 8 Total Orders: 467","Hour: 9 Total Orders: 588","Hour: 10 Total Orders: 764","Hour: 11 Total Orders: 718","Hour: 12 Total Orders: 725","Hour: 13 Total Orders: 807","Hour: 14 Total Orders: 851","Hour: 15 Total Orders: 783","Hour: 16 Total Orders: 732","Hour: 17 Total Orders: 703","Hour: 18 Total Orders: 521","Hour: 19 Total Orders: 399","Hour: 20 Total Orders: 287","Hour: 21 Total Orders: 249","Hour: 22 Total Orders: 182","Hour: 23 Total Orders: 109"],"type":"bar","marker":{"colorbar":{"title":"order_hour","ticklen":2},"cmin":0,"cmax":23,"colorscale":[["0","rgba(141,211,199,1)"],["0.0416666666666667","rgba(197,231,190,1)"],["0.0833333333333333","rgba(246,251,181,1)"],["0.125","rgba(232,229,195,1)"],["0.166666666666667","rgba(202,197,212,1)"],["0.208333333333333","rgba(214,170,187,1)"],["0.25","rgba(241,144,139,1)"],["0.291666666666667","rgba(233,140,134,1)"],["0.333333333333333","rgba(183,163,178,1)"],["0.375","rgba(152,177,197,1)"],["0.416666666666667","rgba(213,179,147,1)"],["0.458333333333333","rgba(250,182,98,1)"],["0.5","rgba(219,202,101,1)"],["0.541666666666667","rgba(183,220,105,1)"],["0.583333333333333","rgba(213,216,158,1)"],["0.625","rgba(244,208,214,1)"],["0.666666666666667","rgba(241,209,225,1)"],["0.708333333333333","rgba(225,215,220,1)"],["0.75","rgba(211,195,210,1)"],["0.791666666666667","rgba(197,154,197,1)"],["0.833333333333333","rgba(192,146,191,1)"],["0.875","rgba(201,195,195,1)"],["0.916666666666667","rgba(209,235,190,1)"],["0.958333333333333","rgba(235,236,152,1)"],["1","rgba(255,237,111,1)"]],"showscale":false,"color":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],"line":{"colorbar":{"title":"","ticklen":2},"cmin":0,"cmax":23,"colorscale":[["0","rgba(141,211,199,1)"],["0.0416666666666667","rgba(197,231,190,1)"],["0.0833333333333333","rgba(246,251,181,1)"],["0.125","rgba(232,229,195,1)"],["0.166666666666667","rgba(202,197,212,1)"],["0.208333333333333","rgba(214,170,187,1)"],["0.25","rgba(241,144,139,1)"],["0.291666666666667","rgba(233,140,134,1)"],["0.333333333333333","rgba(183,163,178,1)"],["0.375","rgba(152,177,197,1)"],["0.416666666666667","rgba(213,179,147,1)"],["0.458333333333333","rgba(250,182,98,1)"],["0.5","rgba(219,202,101,1)"],["0.541666666666667","rgba(183,220,105,1)"],["0.583333333333333","rgba(213,216,158,1)"],["0.625","rgba(244,208,214,1)"],["0.666666666666667","rgba(241,209,225,1)"],["0.708333333333333","rgba(225,215,220,1)"],["0.75","rgba(211,195,210,1)"],["0.791666666666667","rgba(197,154,197,1)"],["0.833333333333333","rgba(192,146,191,1)"],["0.875","rgba(201,195,195,1)"],["0.916666666666667","rgba(209,235,190,1)"],["0.958333333333333","rgba(235,236,152,1)"],["1","rgba(255,237,111,1)"]],"showscale":false,"color":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]}},"xaxis":"x","yaxis":"y","frame":null},{"x":[0,23],"y":[13,851],"type":"scatter","mode":"markers","opacity":0,"hoverinfo":"none","showlegend":false,"marker":{"colorbar":{"title":"order_hour","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"cmin":0,"cmax":23,"colorscale":[["0","rgba(141,211,199,1)"],["0.0416666666666667","rgba(197,231,190,1)"],["0.0833333333333333","rgba(246,251,181,1)"],["0.125","rgba(232,229,195,1)"],["0.166666666666667","rgba(202,197,212,1)"],["0.208333333333333","rgba(214,170,187,1)"],["0.25","rgba(241,144,139,1)"],["0.291666666666667","rgba(233,140,134,1)"],["0.333333333333333","rgba(183,163,178,1)"],["0.375","rgba(152,177,197,1)"],["0.416666666666667","rgba(213,179,147,1)"],["0.458333333333333","rgba(250,182,98,1)"],["0.5","rgba(219,202,101,1)"],["0.541666666666667","rgba(183,220,105,1)"],["0.583333333333333","rgba(213,216,158,1)"],["0.625","rgba(244,208,214,1)"],["0.666666666666667","rgba(241,209,225,1)"],["0.708333333333333","rgba(225,215,220,1)"],["0.75","rgba(211,195,210,1)"],["0.791666666666667","rgba(197,154,197,1)"],["0.833333333333333","rgba(192,146,191,1)"],["0.875","rgba(201,195,195,1)"],["0.916666666666667","rgba(209,235,190,1)"],["0.958333333333333","rgba(235,236,152,1)"],["1","rgba(255,237,111,1)"]],"showscale":true,"color":[0,23],"line":{"color":"rgba(255,127,14,1)"}},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>How do people build their carts</p>
<pre class="r"><code>plot_data &lt;- instacart |&gt; 
  group_by(add_to_cart_order) |&gt; 
  summarise(
    reorder_rate = mean(reordered), 
    total_items = n() 
  ) |&gt; 
  filter(add_to_cart_order &lt;= 20) |&gt; 
  ungroup()


plot_ly(
  data = plot_data,
  x = ~add_to_cart_order,
  y = ~reorder_rate,
  type = &#39;scatter&#39;,
  mode = &#39;lines+markers&#39;, # A line with markers at each data point
  hoverinfo = &#39;text&#39;,
  text = ~paste(
    &quot;Cart Position:&quot;, add_to_cart_order,
    &quot;Reorder Rate:&quot;, paste0(round(reorder_rate * 100, 1), &quot;%&quot;),
    &quot;Total Items:&quot;, format(total_items, big.mark = &quot;,&quot;)
  )) |&gt; 
  
  layout(
    title = &quot;Reorder Rate vs. Cart Position&quot;,
    xaxis = list(
      title = &quot;Item Added to Cart (Order)&quot;
    ),
    yaxis = list(
      title = &quot;Reorder Rate (Likelihood of being a reorder)&quot;,
      tickformat = &#39;.0%&#39; 
    )
  )</code></pre>
<div class="plotly html-widget html-fill-item" id="htmlwidget-7dfd41cc4c4cafb62034" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-7dfd41cc4c4cafb62034">{"x":{"visdat":{"c85c7c4bb6af":["function () ","plotlyVisDat"]},"cur_data":"c85c7c4bb6af","attrs":{"c85c7c4bb6af":{"x":{},"y":{},"mode":"lines+markers","hoverinfo":"text","text":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Reorder Rate vs. Cart Position","xaxis":{"domain":[0,1],"automargin":true,"title":"Item Added to Cart (Order)"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Reorder Rate (Likelihood of being a reorder)","tickformat":".0%"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],"y":[0.73120494335736352,0.68778801843317972,0.68973747016706444,0.65175332527206775,0.64116828929068148,0.5957446808510638,0.56879194630872487,0.54269449715370022,0.56719367588932801,0.56216216216216219,0.51908396946564883,0.58333333333333337,0.55102040816326525,0.5171102661596958,0.5,0.50777202072538863,0.53216374269005851,0.50306748466257667,0.49264705882352944,0.4358974358974359],"mode":"lines+markers","hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"text":["Cart Position: 1 Reorder Rate: 73.1% Total Items: 971","Cart Position: 2 Reorder Rate: 68.8% Total Items: 868","Cart Position: 3 Reorder Rate: 69% Total Items: 838","Cart Position: 4 Reorder Rate: 65.2% Total Items: 827","Cart Position: 5 Reorder Rate: 64.1% Total Items: 719","Cart Position: 6 Reorder Rate: 59.6% Total Items: 705","Cart Position: 7 Reorder Rate: 56.9% Total Items: 596","Cart Position: 8 Reorder Rate: 54.3% Total Items: 527","Cart Position: 9 Reorder Rate: 56.7% Total Items: 506","Cart Position: 10 Reorder Rate: 56.2% Total Items: 370","Cart Position: 11 Reorder Rate: 51.9% Total Items: 393","Cart Position: 12 Reorder Rate: 58.3% Total Items: 348","Cart Position: 13 Reorder Rate: 55.1% Total Items: 294","Cart Position: 14 Reorder Rate: 51.7% Total Items: 263","Cart Position: 15 Reorder Rate: 50% Total Items: 242","Cart Position: 16 Reorder Rate: 50.8% Total Items: 193","Cart Position: 17 Reorder Rate: 53.2% Total Items: 171","Cart Position: 18 Reorder Rate: 50.3% Total Items: 163","Cart Position: 19 Reorder Rate: 49.3% Total Items: 136","Cart Position: 20 Reorder Rate: 43.6% Total Items: 117"],"type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
